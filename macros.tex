%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%% Standard Notation %%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%

\let\oldepsilon\epsilon
\let\epsilon\varepsilon

\let\oldphi\phi
\let\phi\varphi

% mathbb
\newcommand{\R}{\mathbb{R}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\cF}{\mathcal{F}}
\newcommand{\cA}{\mathcal{A}}
\renewcommand{\P}{\mathbb{P}}
\newcommand{\Q}{\mathbb{Q}}

% tilde
\newcommand{\tS}{\tilde{S}}

%%%%%%%%%%%%% Some Glue Notation
\DeclareMathOperator*{\defn}{\stackrel{\operatorname{def}}{=}}
\DeclareMathOperator*{\interior}{int}
\DeclareMathOperator*{\cl}{cl}

\newcommand{\asconv}{\stackrel{\operatorname{a.s.}}{\longrightarrow}}
\newcommand{\psubsp}{\triangleleft}
\newcommand{\subsp}{\trianglelefteq}
\newcommand{\set}[1]{\left\{ #1 \right\}}

% Sphere
\RenewDocumentCommand{\S}{o}{
    \mathbf{S}
    \IfNoValueTF{#1}{}{^{#1}}
}

% Ball
\NewDocumentCommand{\B}{o o}{
    B
    \IfNoValueTF{#2}{}{^{#2}}
    \IfNoValueTF{#1}{}{_{#1}}
}

% Lp spaces
\newcommand{\Lsym}{L}
\RenewDocumentCommand{\L}{o o}{
    \Lsym
    \IfNoValueTF{#1}{}{^{#1}}
    \IfNoValueTF{#2}{}{\left( #2 \right)}
}
\newcommand{\Lp}{\L[p]}
\newcommand{\Lq}{\L[q]}

% lp spaces
\RenewDocumentCommand{\l}{o o}{
    \ell
    \IfNoValueTF{#1}{}{^{#1}
    \IfNoValueTF{#2}{}{_{#2}}}
}
\newcommand{\llinfty}{\l[\infty]}

%%%%%%%%%%%%% Common Functionals, Measures, Operators
\DeclareMathOperator{\E}{\mathbb{E}}
\DeclareMathOperator*{\spn}{span}
\DeclareMathOperator*{\ran}{ran}
\DeclareMathOperator{\Id}{Id}

\NewDocumentCommand{\T}{o}{
    \IfNoValueTF{#1}{\cdot^{\top}}{{#1}^{\top}}
}

\NewDocumentCommand{\inv}{o}{
    \IfNoValueTF{#1}{\cdot^{-1}}{{#1}^{-1}}
}
\newcommand{\At}{\T[A]}
\newcommand{\Ainv}{\inv[A]}

\NewDocumentCommand{\indic}{o}{
    \mathds{1}
    \IfNoValueTF{#1}{}{_{\set{#1}}}
}

\renewcommand{\d}{\mathrm{d}}
\NewDocumentCommand{\intt}{o o o o}{
    \int
    \IfNoValueTF{#1}{}{_{#1}}
    \IfNoValueTF{#2}{}{^{#2}}
    \IfNoValueTF{#3}{}{#3}\, 
    \IfNoValueTF{#4}{}{\d #4}
}

\NewDocumentCommand{\abs}{o}{
    \left\lvert
        \IfNoValueTF{#1}{\cdot}{#1}
    \right\rvert
}

\NewDocumentCommand{\norm}{o o}{
    \left\lVert
        \IfNoValueTF{#1}{\cdot}{#1}
    \right\rVert
    \IfNoValueTF{#2}{}{\IfBlankTF{#2}{}{_{#2}}}
}

\NewDocumentCommand{\inn}{o o o}{
    \left(
    \IfNoValueTF{#1}{\cdot}{#1}
    \mid
    \IfNoValueTF{#2}{\cdot}{#2}
    \right)
    \IfNoValueTF{#3}{}{_{#3}}
}

\DeclareMathOperator{\Prsym}{\mathbb{P}}
\RenewDocumentCommand{\Pr}{o}{
    \Prsym
    \IfNoValueTF{#1}{}{\left\{{#1}\right\}}
}

\newcommand*{\from}{\colon}